<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Antoine Lucas</title>
<link>https://antoinelucasfra.github.io/blog.html</link>
<atom:link href="https://antoinelucasfra.github.io/blog.xml" rel="self" type="application/rss+xml"/>
<description>Data Scientist specializing in pharma and cosmetic industries — Portfolio, Blog, and Projects</description>
<image>
<url>https://antoinelucasfra.github.io/assets/images/profile.jpg</url>
<title>Antoine Lucas</title>
<link>https://antoinelucasfra.github.io/blog.html</link>
</image>
<generator>quarto-1.7.32</generator>
<lastBuildDate>Thu, 12 Dec 2024 23:00:00 GMT</lastBuildDate>
<item>
  <title>rv: The Modern R Package Manager for Reproducible Workflows</title>
  <dc:creator>Antoine Lucas</dc:creator>
  <link>https://antoinelucasfra.github.io/posts/rv-modern-r-package-manager/</link>
  <description><![CDATA[ 





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The R ecosystem has long relied on <code>renv</code> for dependency management, but a new challenger has emerged: <strong>rv</strong> — a declarative R package manager written in Rust that promises faster, more reproducible package installations.</p>
<p>If you’ve been following the Python ecosystem, you’ve likely heard of <a href="https://docs.astral.sh/uv/">uv</a>, the blazingly fast Python package manager from Astral. <code>rv</code> brings that same philosophy to R: <strong>declarative configuration, fast execution, and true reproducibility</strong>.</p>
</section>
<section id="what-is-rv" class="level2">
<h2 class="anchored" data-anchor-id="what-is-rv">What is rv?</h2>
<p><code>rv</code> is an R package manager that takes a fundamentally different approach from traditional tools:</p>
<ul>
<li><strong>Declarative</strong> — You describe the <em>desired state</em> of your project, not the steps to get there</li>
<li><strong>Written in Rust</strong> — Compiled for speed (25x faster than alternatives in benchmarks)</li>
<li><strong>Holistic resolution</strong> — Resolves the entire dependency tree before installing anything</li>
<li><strong>Lock at install time</strong> — Captures all installation information when it happens, not retroactively</li>
</ul>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install rv (Linux/macOS)</span></span>
<span id="cb1-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-sSL</span> https://raw.githubusercontent.com/A2-ai/rv/refs/heads/main/scripts/install.sh <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span></span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Or with Homebrew (macOS)</span></span>
<span id="cb1-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> tap a2-ai/homebrew-tap</span>
<span id="cb1-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> install rv</span></code></pre></div>
</section>
<section id="the-problem-with-iterative-installation" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-with-iterative-installation">The Problem with Iterative Installation</h2>
<p>Traditional R package management (including <code>renv</code>) follows an <strong>iterative pattern</strong>:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Typical iterative workflow</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span>)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot2"</span>)</span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... more packages ...</span></span>
<span id="cb2-5">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snapshot</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Capture state after the fact</span></span></code></pre></div>
<p>This creates two fundamental issues:</p>
<ol type="1">
<li><strong>Incompatible versions</strong> — Packages installed at different times may have conflicting dependencies</li>
<li><strong>Lost context</strong> — By the time you snapshot, information about <em>how</em> packages were installed is lost</li>
</ol>
</section>
<section id="rvs-declarative-approach" class="level2">
<h2 class="anchored" data-anchor-id="rvs-declarative-approach">rv’s Declarative Approach</h2>
<p>With <code>rv</code>, you declare what you want in a <code>rproject.toml</code> file:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project]</span></span>
<span id="cb3-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"my-analysis"</span></span>
<span id="cb3-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">r_version</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4.5"</span></span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">repositories</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb3-6">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">alias</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PPM"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://packagemanager.posit.co/cran/latest"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> },</span></span>
<span id="cb3-7"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb3-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyr"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-13"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
<p>Then synchronize your project:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> sync</span></code></pre></div>
<p>That’s it. <code>rv</code> resolves the complete dependency tree, ensures compatibility, installs everything, and creates a lockfile — all in one atomic operation.</p>
</section>
<section id="quick-start" class="level2">
<h2 class="anchored" data-anchor-id="quick-start">Quick Start</h2>
<section id="initialize-a-new-project" class="level3">
<h3 class="anchored" data-anchor-id="initialize-a-new-project">Initialize a New Project</h3>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> init my-project</span>
<span id="cb5-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> my-project</span></code></pre></div>
<p>This creates the following structure:</p>
<pre><code>my-project/
├── rv/
│   ├── library/
│   ├── scripts/
│   │   ├── activate.R
│   │   └── rvr.R
│   └── .gitignore
├── .Rprofile
├── rproject.toml
└── rv.lock</code></pre>
</section>
<section id="add-dependencies" class="level3">
<h3 class="anchored" data-anchor-id="add-dependencies">Add Dependencies</h3>
<p>Edit <code>rproject.toml</code> or use the CLI:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> add dplyr ggplot2 tidyverse</span></code></pre></div>
</section>
<section id="check-what-will-happen" class="level3">
<h3 class="anchored" data-anchor-id="check-what-will-happen">Check What Will Happen</h3>
<p>Before installing, preview the changes:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> plan</span></code></pre></div>
</section>
<section id="synchronize" class="level3">
<h3 class="anchored" data-anchor-id="synchronize">Synchronize</h3>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> sync</span></code></pre></div>
</section>
</section>
<section id="key-commands" class="level2">
<h2 class="anchored" data-anchor-id="key-commands">Key Commands</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>rv init</code></td>
<td>Initialize a new project</td>
</tr>
<tr class="even">
<td><code>rv sync</code></td>
<td>Synchronize packages with config</td>
</tr>
<tr class="odd">
<td><code>rv add &lt;pkg&gt;</code></td>
<td>Add package to config and sync</td>
</tr>
<tr class="even">
<td><code>rv plan</code></td>
<td>Preview what sync would do</td>
</tr>
<tr class="odd">
<td><code>rv upgrade</code></td>
<td>Update packages (ignores lockfile)</td>
</tr>
<tr class="even">
<td><code>rv tree</code></td>
<td>Show dependency tree</td>
</tr>
<tr class="odd">
<td><code>rv migrate renv</code></td>
<td>Migrate from renv project</td>
</tr>
</tbody>
</table>
</section>
<section id="rv-vs-renv-a-comparison" class="level2">
<h2 class="anchored" data-anchor-id="rv-vs-renv-a-comparison">rv vs renv: A Comparison</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 45%">
<col style="width: 30%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>renv</th>
<th>rv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Installation</td>
<td>Iterative</td>
<td>Declarative</td>
</tr>
<tr class="even">
<td>Lock timing</td>
<td>After installation (snapshot)</td>
<td>At installation</td>
</tr>
<tr class="odd">
<td>Compatibility check</td>
<td>None (trust the process)</td>
<td>Full tree resolution</td>
</tr>
<tr class="even">
<td>Written in</td>
<td>R</td>
<td>Rust</td>
</tr>
<tr class="odd">
<td>Speed</td>
<td>Slower</td>
<td>~25x faster</td>
</tr>
<tr class="even">
<td>Config format</td>
<td>R code + JSON lockfile</td>
<td>TOML + lockfile</td>
</tr>
</tbody>
</table>
<section id="migrating-from-renv" class="level3">
<h3 class="anchored" data-anchor-id="migrating-from-renv">Migrating from renv</h3>
<p>If you have an existing <code>renv</code> project:</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> migrate renv</span></code></pre></div>
<p>This converts your <code>renv.lock</code> to an <code>rv</code> configuration.</p>
</section>
</section>
<section id="the-uv-parallel-modern-package-management" class="level2">
<h2 class="anchored" data-anchor-id="the-uv-parallel-modern-package-management">The uv Parallel: Modern Package Management</h2>
<p>The parallels between <code>rv</code> and Python’s <code>uv</code> are striking and intentional:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Concept</th>
<th>Python (uv)</th>
<th>R (rv)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Config file</td>
<td><code>pyproject.toml</code></td>
<td><code>rproject.toml</code></td>
</tr>
<tr class="even">
<td>Lock file</td>
<td><code>uv.lock</code></td>
<td><code>rv.lock</code></td>
</tr>
<tr class="odd">
<td>Sync command</td>
<td><code>uv sync</code></td>
<td><code>rv sync</code></td>
</tr>
<tr class="even">
<td>Add package</td>
<td><code>uv add</code></td>
<td><code>rv add</code></td>
</tr>
<tr class="odd">
<td>Written in</td>
<td>Rust</td>
<td>Rust</td>
</tr>
<tr class="even">
<td>Philosophy</td>
<td>Declarative, fast</td>
<td>Declarative, fast</td>
</tr>
</tbody>
</table>
<p>Both tools share the same vision:</p>
<ul>
<li><strong>Speed through Rust</strong> — Compiled performance beats interpreted languages</li>
<li><strong>Declarative configuration</strong> — Describe the end state, not the steps</li>
<li><strong>Reproducibility first</strong> — Lockfiles capture everything needed to recreate the environment</li>
<li><strong>Modern DX</strong> — Clear CLI, helpful error messages, predictable behavior</li>
</ul>
</section>
<section id="a-modern-r-workflow-rig-rv" class="level2">
<h2 class="anchored" data-anchor-id="a-modern-r-workflow-rig-rv">A Modern R Workflow: rig + rv</h2>
<p>Combining <code>rv</code> with <a href="https://github.com/r-lib/rig">rig</a> (the R installation manager) creates a powerful, modern workflow:</p>
<section id="manage-r-versions-with-rig" class="level3">
<h3 class="anchored" data-anchor-id="manage-r-versions-with-rig">1. Manage R Versions with rig</h3>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install rig (macOS)</span></span>
<span id="cb11-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> tap r-lib/rig</span>
<span id="cb11-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> install rig</span>
<span id="cb11-4"></span>
<span id="cb11-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Or Linux</span></span>
<span id="cb11-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-L</span> https://rig.r-lib.org/rig-linux-latest.tar.gz <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> tar xz <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-C</span> /usr/local</span>
<span id="cb11-7"></span>
<span id="cb11-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># List available R versions</span></span>
<span id="cb11-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> available</span>
<span id="cb11-10"></span>
<span id="cb11-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install a specific version</span></span>
<span id="cb11-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> add 4.5</span>
<span id="cb11-13"></span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set default version</span></span>
<span id="cb11-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> default 4.5</span>
<span id="cb11-16"></span>
<span id="cb11-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># List installed versions</span></span>
<span id="cb11-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> list</span></code></pre></div>
</section>
<section id="manage-packages-with-rv" class="level3">
<h3 class="anchored" data-anchor-id="manage-packages-with-rv">2. Manage Packages with rv</h3>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialize project with current R version</span></span>
<span id="cb12-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> init my-analysis</span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rv automatically detects R version from rig</span></span>
<span id="cb12-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span> rproject.toml</span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># [project]</span></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># r_version = "4.5"</span></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...</span></span></code></pre></div>
</section>
<section id="the-complete-workflow" class="level3">
<h3 class="anchored" data-anchor-id="the-complete-workflow">3. The Complete Workflow</h3>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Ensure you have the right R version</span></span>
<span id="cb13-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> add 4.5</span>
<span id="cb13-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> default 4.5</span>
<span id="cb13-4"></span>
<span id="cb13-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Create a new project</span></span>
<span id="cb13-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> init data-analysis</span>
<span id="cb13-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> data-analysis</span>
<span id="cb13-8"></span>
<span id="cb13-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Add your dependencies</span></span>
<span id="cb13-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> add tidyverse arrow DBI</span>
<span id="cb13-11"></span>
<span id="cb13-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Start working</span></span>
<span id="cb13-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># &gt; library(tidyverse)  # Just works!</span></span></code></pre></div>
</section>
<section id="project-specific-r-versions" class="level3">
<h3 class="anchored" data-anchor-id="project-specific-r-versions">Project-Specific R Versions</h3>
<p>The <code>r_version</code> field in <code>rproject.toml</code> ensures teammates use the correct R version:</p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb14-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project]</span></span>
<span id="cb14-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"critical-analysis"</span></span>
<span id="cb14-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">r_version</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4.4"</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pin to R 4.4.x</span></span></code></pre></div>
<p>With <code>rig</code>, switching is trivial:</p>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> switch 4.4</span>
<span id="cb15-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> sync</span></code></pre></div>
</section>
</section>
<section id="advanced-configuration" class="level2">
<h2 class="anchored" data-anchor-id="advanced-configuration">Advanced Configuration</h2>
<section id="specify-package-sources" class="level3">
<h3 class="anchored" data-anchor-id="specify-package-sources">Specify Package Sources</h3>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb16-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb16-2">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb16-3">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mypackage"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">git</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://github.com/org/mypackage.git"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">tag</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"v1.0.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> },</span></span>
<span id="cb16-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"internal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">repository</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Internal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> },</span></span>
<span id="cb16-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb16-6"></span>
<span id="cb16-7"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">repositories</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb16-8">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">alias</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PPM"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://packagemanager.posit.co/cran/latest"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> },</span></span>
<span id="cb16-9">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">alias</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Internal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://internal.company.com/r-packages"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> },</span></span>
<span id="cb16-10"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</section>
<section id="binary-vs-source" class="level3">
<h3 class="anchored" data-anchor-id="binary-vs-source">Binary vs Source</h3>
<p><code>rv</code> intelligently handles binary and source installations, with options to configure per-package:</p>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb17-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb17-2">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arrow"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">source</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> },</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Force source compilation</span></span>
<span id="cb17-3"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</section>
<section id="configure-compilation" class="level3">
<h3 class="anchored" data-anchor-id="configure-compilation">Configure Compilation</h3>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb18-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project.packages_env_vars.arrow]</span></span>
<span id="cb18-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">ARROW_WITH_S3</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ON"</span></span>
<span id="cb18-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">ARROW_WITH_GCS</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ON"</span></span>
<span id="cb18-4"></span>
<span id="cb18-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project.configure_args]</span></span>
<span id="cb18-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sf</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--with-proj-share=/usr/local/share/proj"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</section>
</section>
<section id="why-this-matters-for-reproducibility" class="level2">
<h2 class="anchored" data-anchor-id="why-this-matters-for-reproducibility">Why This Matters for Reproducibility</h2>
<p>The combination of declarative package management (<code>rv</code>) and explicit R version management (<code>rig</code>) solves the two hardest problems in reproducibility:</p>
<ol type="1">
<li><strong>“Works on my machine”</strong> → Lockfile captures exact package versions and sources</li>
<li><strong>“Which R version?”</strong> → <code>r_version</code> in config + <code>rig</code> for installation</li>
</ol>
<p>For regulated environments (pharma, finance, etc.), this is transformative:</p>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Clone a project</span></span>
<span id="cb19-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/org/clinical-analysis</span>
<span id="cb19-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> clinical-analysis</span>
<span id="cb19-4"></span>
<span id="cb19-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up exact R version</span></span>
<span id="cb19-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rig</span> add <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> r_version rproject.toml <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cut</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'"'</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f2</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb19-7"></span>
<span id="cb19-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore exact package environment</span></span>
<span id="cb19-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> sync</span>
<span id="cb19-10"></span>
<span id="cb19-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ✅ Identical environment, guaranteed</span></span></code></pre></div>
</section>
<section id="getting-started-today" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-today">Getting Started Today</h2>
<ol type="1">
<li><p><strong>Install rig</strong> for R version management:</p>
<div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> tap r-lib/rig <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> install rig</span></code></pre></div></li>
<li><p><strong>Install rv</strong> for package management:</p>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-sSL</span> https://raw.githubusercontent.com/A2-ai/rv/refs/heads/main/scripts/install.sh <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span></span></code></pre></div></li>
<li><p><strong>Create your first project</strong>:</p>
<div class="sourceCode" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> init my-project</span>
<span id="cb22-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> my-project</span>
<span id="cb22-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> add tidyverse</span>
<span id="cb22-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">rv</span> sync</span></code></pre></div></li>
</ol>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p><code>rv</code> represents a paradigm shift in R package management — from iterative, reactive tooling to declarative, proactive workflows. Combined with <code>rig</code> for R version management, it provides a modern development experience on par with what Python developers enjoy with <code>uv</code> and <code>pyenv</code>.</p>
<p>The R ecosystem is evolving. Tools like <code>rv</code>, <code>rig</code>, and <a href="https://posit-dev.github.io/air/">air</a> (the new R formatter) are bringing modern development practices to R. If you value reproducibility, speed, and developer experience, give <code>rv</code> a try.</p>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><a href="https://a2-ai.github.io/rv-docs/">rv Documentation</a></li>
<li><a href="https://github.com/a2-ai/rv">rv GitHub Repository</a></li>
<li><a href="https://github.com/r-lib/rig">rig - R Installation Manager</a></li>
<li><a href="https://docs.astral.sh/uv/">uv - Python Package Manager</a></li>
<li><a href="https://posit-dev.github.io/air/">air - R Code Formatter</a></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a> ]]></description>
  <category>R</category>
  <category>Package Management</category>
  <category>Reproducibility</category>
  <category>Rust</category>
  <category>Modern Workflow</category>
  <guid>https://antoinelucasfra.github.io/posts/rv-modern-r-package-manager/</guid>
  <pubDate>Thu, 12 Dec 2024 23:00:00 GMT</pubDate>
  <media:content url="https://antoinelucasfra.github.io/posts/rv-modern-r-package-manager/featured.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Building Reproducible Analyses in Pharma with R</title>
  <dc:creator>Antoine Lucas</dc:creator>
  <link>https://antoinelucasfra.github.io/posts/reproducible-pharma-r/</link>
  <description><![CDATA[ <section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In pharmaceutical data science, reproducibility isn’t just a best practice—it’s a regulatory requirement. This post explores how to build reproducible analysis workflows using R, renv, and Quarto.</p>
</section><section id="why-reproducibility-matters-in-pharma" class="level2"><h2 class="anchored" data-anchor-id="why-reproducibility-matters-in-pharma">Why Reproducibility Matters in Pharma</h2>
<p>Regulatory agencies like the FDA and EMA require that analytical work be:</p>
<ul>
<li>
<strong>Documented</strong> — Clear records of what was done</li>
<li>
<strong>Traceable</strong> — Ability to follow the analysis from raw data to conclusions</li>
<li>
<strong>Reproducible</strong> — The same inputs should produce the same outputs</li>
</ul></section><section id="key-tools-for-reproducibility" class="level2"><h2 class="anchored" data-anchor-id="key-tools-for-reproducibility">Key Tools for Reproducibility</h2>
<section id="version-control-with-git" class="level3"><h3 class="anchored" data-anchor-id="version-control-with-git">1. Version Control with Git</h3>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> init</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Initial analysis setup"</span></span></code></pre></div>
</section><section id="dependency-management-with-renv" class="level3"><h3 class="anchored" data-anchor-id="dependency-management-with-renv">2. Dependency Management with renv</h3>
<div class="cell">
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialize renv for the project</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">renv</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/renv/reference/init.html">init</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Snapshot current dependencies</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">renv</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/renv/reference/snapshot.html">snapshot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore dependencies on a new machine</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">renv</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/renv/reference/restore.html">restore</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
</section><section id="pipeline-management-with-targets" class="level3"><h3 class="anchored" data-anchor-id="pipeline-management-with-targets">3. Pipeline Management with targets</h3>
<div class="cell">
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://docs.ropensci.org/targets/">targets</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define your analysis pipeline</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tar_target</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">raw_data</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/clinical_data.csv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tar_target</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">clean_data</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean_clinical_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">raw_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tar_target</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">analysis</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run_statistical_analysis</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">clean_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tar_target</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">report</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">render_report</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">analysis</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
</section></section><section id="best-practices" class="level2"><h2 class="anchored" data-anchor-id="best-practices">Best Practices</h2>
<ol type="1">
<li>
<strong>Use project-relative paths</strong> — Never use absolute paths</li>
<li>
<strong>Document your environment</strong> — Include session info in reports</li>
<li>
<strong>Validate data inputs</strong> — Check data quality before analysis</li>
<li>
<strong>Version control everything</strong> — Code, configuration, and documentation</li>
</ol></section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Building reproducible analyses requires upfront investment but pays dividends in quality, compliance, and peace of mind.</p>
</section><section id="session-info" class="level2"><h2 class="anchored" data-anchor-id="session-info">Session Info</h2>
<div class="cell">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a> ]]></description>
  <category>R</category>
  <category>Pharma</category>
  <category>Reproducibility</category>
  <category>Best Practices</category>
  <guid>https://antoinelucasfra.github.io/posts/reproducible-pharma-r/</guid>
  <pubDate>Thu, 14 Nov 2024 23:00:00 GMT</pubDate>
  <media:content url="https://antoinelucasfra.github.io/posts/reproducible-pharma-r/featured.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Complete Development Setup Guide for R &amp; Python</title>
  <dc:creator>Antoine Lucas</dc:creator>
  <link>https://antoinelucasfra.github.io/posts/dev-setup-guide/</link>
  <description><![CDATA[ 





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This guide provides a complete and reproducible path to installing R &amp; Python along with a fully configured VS Code setup. It’s meant to be definitive and fully reproducible.</p>
</section>
<section id="first-you-need-to-install-r" class="level2">
<h2 class="anchored" data-anchor-id="first-you-need-to-install-r">First you need to install R :</h2>
<ul>
<li>Recommended way : you can install R via rig which is an installation manager https://github.com/r-lib/rig</li>
</ul>
<p>With rig you can very easily install multiple and handle different R versions.</p>
<ul>
<li>you can follow the classic R installation via CRAN https://cran.rstudio.com/</li>
</ul>
</section>
<section id="then-you-need-to-install-python" class="level2">
<h2 class="anchored" data-anchor-id="then-you-need-to-install-python">Then you need to install python :</h2>
<ul>
<li><p>follow classic python installation, python is probably already available if you are with a linux system http://python.org/downloads/</p></li>
<li><p>we recommend also to install pipx to handle python libvrary installation https://github.com/pypa/pipx</p></li>
</ul>
</section>
<section id="then-we-need-to-install-our-favorite-ide-for-developing" class="level2">
<h2 class="anchored" data-anchor-id="then-we-need-to-install-our-favorite-ide-for-developing">then we need to install our favorite IDE for developing</h2>
<p>Here we VERY strongly recommend using vscode which allows a complete flexibility for developing in various languages (not only in R) : https://code.visualstudio.com/</p>
<p>You can use any other IDE (Rstudio, Pycharm, etc…) but only the configurations of VScode will be developed, feel free to search for your own guides &amp; issues for other IDEs.</p>
</section>
<section id="now-we-can-install-various-tools-for-moden-development" class="level2">
<h2 class="anchored" data-anchor-id="now-we-can-install-various-tools-for-moden-development">Now we can install various tools for moden development</h2>
<p>In R, we are using installation with a modern oriented development workflow.</p>
<p>To finish installation in vscode to have a complete R integration you need to follow the following steps : - follow R &amp; vscode https://code.visualstudio.com/docs/languages/r</p>
<p>For this, we will be having various tools to ensure this workflow :</p>
<ul>
<li><p>first we’ll be using quarto for authoring, reporting and produce deliverables https://quarto.org/docs/get-started/ and you can install quarto vscode extention</p></li>
<li><p>We can also install quarto wizard on vscode to healp us easy to use quarto extensions https://github.com/mcanouil/quarto-wizard</p></li>
</ul>
<p>To follow good principles of development, we’ll be using tools to ensure that everything is on track :</p>
<p>For formatting/styling code :</p>
<ul>
<li><p>air for formatting R code https://posit-dev.github.io/air/editor-vscode.html (alternative to styler)</p></li>
<li><p>ruff for formatting python code https://docs.astral.sh/ruff/</p></li>
<li><p>prettier for any other languages https://prettier.io/</p></li>
</ul>
<p>For linting in both R &amp; python you have the errorlens extension that is very complete and useful https://marketplace.visualstudio.com/items/?itemName=usernamehw.errorlens</p>
<p>For notebooks in python :</p>
<ul>
<li><p>if you want to use notebooks, we strongly recommend using https://github.com/marimo-team/marimo to write in notebooks</p></li>
<li><p>otherwise there’s still the classic jupyter alternatives https://jupyter.org/</p></li>
</ul>
<p>There’s infinite possibilities for vscode extensions, please install them according to your needs and care for trusted publishers. Here’s an example command to list your installed extensions:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">code</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--list-extensions</span></span></code></pre></div>
<p>For reproducible environments and library to manage and handle we have :</p>
<ul>
<li><p>uv in python, which is a (COMPLETE AND SUPERIOR) alternative to pyenv and other python pkg management tools https://docs.astral.sh/uv/</p></li>
<li><p>renv to handle R pkg management which is the most common admitted tool to use in R community BUT there’s a new tool in town called rv https://github.com/A2-ai/ that is meant to be the uv for R</p></li>
</ul>
<p>other resources and setup R/VScode : https://rolkra.github.io/R-VSCode/ https://renkun.me/2022/03/06/my-recommendations-of-vs-code-extensions-for-r/ and more globally various blog posts : https://renkun.me/</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a> ]]></description>
  <category>R</category>
  <category>Python</category>
  <category>VS Code</category>
  <category>Setup</category>
  <category>Tutorial</category>
  <guid>https://antoinelucasfra.github.io/posts/dev-setup-guide/</guid>
  <pubDate>Mon, 14 Oct 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Statistical Process Control for Cosmetic Manufacturing</title>
  <dc:creator>Antoine Lucas</dc:creator>
  <link>https://antoinelucasfra.github.io/posts/spc-cosmetics-r/</link>
  <description><![CDATA[ <section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Statistical Process Control (SPC) is essential for maintaining consistent product quality in cosmetic manufacturing. This post demonstrates how to implement SPC charts using R.</p>
</section><section id="the-basics-of-spc" class="level2"><h2 class="anchored" data-anchor-id="the-basics-of-spc">The Basics of SPC</h2>
<p>SPC uses control charts to monitor process behavior over time. Key concepts:</p>
<ul>
<li>
<strong>Center Line (CL)</strong> — The process average</li>
<li>
<strong>Upper Control Limit (UCL)</strong> — CL + 3σ</li>
<li>
<strong>Lower Control Limit (LCL)</strong> — CL - 3σ</li>
</ul></section><section id="implementing-control-charts-in-r" class="level2"><h2 class="anchored" data-anchor-id="implementing-control-charts-in-r">Implementing Control Charts in R</h2>
<section id="x-bar-chart-example" class="level3"><h3 class="anchored" data-anchor-id="x-bar-chart-example">X-bar Chart Example</h3>
<div class="cell">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/luca-scr/qcc">qcc</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sample viscosity measurements from production batches</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">viscosity</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4520</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4535</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4510</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4525</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4540</span>,</span>
<span>  <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4515</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4530</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4505</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4545</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4520</span>,</span>
<span>  <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4525</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4510</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4535</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4515</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4530</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create groups (5 samples per subgroup)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">groups</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, each <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create X-bar chart</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">qcc</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">viscosity</span>, type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xbar"</span>, sizes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
</section><section id="r-chart-for-variability" class="level3"><h3 class="anchored" data-anchor-id="r-chart-for-variability">R Chart for Variability</h3>
<div class="cell">
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># R chart for within-subgroup variability</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">qcc</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">viscosity</span>, type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span>, sizes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
</section></section><section id="detecting-out-of-control-conditions" class="level2"><h2 class="anchored" data-anchor-id="detecting-out-of-control-conditions">Detecting Out-of-Control Conditions</h2>
<p>Common patterns to watch for:</p>
<ol type="1">
<li>
<strong>Points beyond control limits</strong> — Immediate investigation needed</li>
<li>
<strong>Run of 7+ points</strong> — Process shift detected</li>
<li>
<strong>Trends</strong> — Gradual drift in process</li>
<li>
<strong>Hugging the center line</strong> — Possible measurement issues</li>
</ol></section><section id="creating-an-automated-spc-dashboard" class="level2"><h2 class="anchored" data-anchor-id="creating-an-automated-spc-dashboard">Creating an Automated SPC Dashboard</h2>
<div class="cell">
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://shiny.posit.co/">shiny</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/luca-scr/qcc">qcc</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Simple Shiny app structure</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ui</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Production Quality Monitor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarLayout</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Select Product:"</span>,</span>
<span>                  choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Moisturizer A"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Serum B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cleanser C"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"controlChart"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">server</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">controlChart</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate control chart based on selected product</span></span>
<span>    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... chart generation code</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</div>
</section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>SPC is a powerful tool for maintaining quality in cosmetic manufacturing. With R, you can automate monitoring and quickly detect process issues.</p>
</section><section id="further-reading" class="level2"><h2 class="anchored" data-anchor-id="further-reading">Further Reading</h2>
<ul>
<li>Montgomery, D.C. “Introduction to Statistical Quality Control”</li>
<li>ISO 22716: Cosmetics Good Manufacturing Practices</li>
</ul>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a> ]]></description>
  <category>R</category>
  <category>Quality Control</category>
  <category>Cosmetics</category>
  <category>SPC</category>
  <guid>https://antoinelucasfra.github.io/posts/spc-cosmetics-r/</guid>
  <pubDate>Thu, 19 Sep 2024 22:00:00 GMT</pubDate>
  <media:content url="https://antoinelucasfra.github.io/posts/spc-cosmetics-r/featured.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Statistical Theory: Frequentist Methods Reference</title>
  <dc:creator>Antoine Lucas</dc:creator>
  <link>https://antoinelucasfra.github.io/posts/stats-theory-frequentist/</link>
  <description><![CDATA[ 





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This page serves as a reference for common frequentist statistical methods and their implementation in R.</p>
</section>
<section id="theory-on-statistical-tests" class="level2">
<h2 class="anchored" data-anchor-id="theory-on-statistical-tests">Theory on Statistical Tests</h2>
<p>Les différents tests statistiques : P-value : c’est la proba que le hasard peut expliquer tout seul 1 différence AU MOINS aussi importante que celle observée. Il y a 2 types d’hypothèses : • Neyman/pearson : l’hypothèse H0 : pa= pb et H1 : pa != pb avec par ex p=0.049 et p=0.00001 ont la MEME « force » de test • Fischer : pareil mais p=0.049 et p = 0.0000001 ont PAS DU TOUT la même force de test</p>
<p>COMPARAISON DE 2 POURCENTAGES</p>
<p>Prop.table(dataframe, ½) =regarde le % de 1ere variable // à 2eme (2/1 si inverse) • Test du chi-2 : chisq.test(x,y,correct=FALSE/TRUE) AVEC les hypothèses de validité (% loin de 0 et 100 et grand échantillon) • Test fischer si aucune hypothèse vérifiée : fisher.test(x,y)</p>
<p>COMPARAISON DE 2 MOYENNES</p>
<p>• Test de student : n30 avec une distribution normale. Diagramme de normalité : qqnorm() et qqline(x). Calcul variance : by(x,y,sd,na.rm=TRUE) T.test(x~y,var.equal=TRUE) si pas d’hypothèses : wilcox.test(x~y) Test nullité d’un coeff de corrélation, • Test nullité de corrélation entre 2 variables : 1 des 2 variables doit suivre la loi normale =pearson : cor.test(x,y) • Spearman(x,y,method= »spearman ») Comparaison de moyenne // à moyenne de référence • T.test(var,varfixe=XXXX) • Mcnemar.test(var avant, var après) POUR VAR QUALI • T.test (début,fin,paired=TRUE) POUR VAR QUANTI</p>
<p>LE T-TEST ANALYSE LES ECARTS TYPES ET LE F-TEST ANALYSE LES MOYENNES</p>
<p>TEST NON PARAMETRIQUES Test de wilcoxon : comparaison de K= 2 echantillons independants par rapport a une variable X de nature : Quantitative/Qualitative ordinale C’est le test de l’hypothèse selon laquelle les médianes de chacun de deux groupes de données sont proche Test de cruskal wallis : est une comparaison de K=3 échantillons. Ainsi, l’interprétation du test de Kruskal-Wallis est très similaire à une ANOVA paramétrique d’ordre Un, sauf qu’il est basé sur les rangs au lieu des moyennes.</p>
<p>REGRESSION LINEAIRE SIMPLE (GENERALISATION DU TEST DE STUDENT) Modèle :lm(x~y,data= dataframe)</p>
<p>REGRESSION LINEAIRE MULTIPLE :</p>
<p>Les hypothèses à vérifier sont : normalité du bruit et terme résiduel, le bruit est indépendant des valeurs des autres variables, ABSENCE de corrélation évidente, interne avec le bruit Lm(x~y+w+z,data = dataframe) Var quanti = somme (var quanti ou binaire MAIS PAS QUALI) si on veut des quali=codage à la main Interactions entre 2 var = on met un * Analyse de variance/covariance = cas particulier de régression linéaire multiple : toutes les variables explicatives sont catégorielles ou quantitatives</p>
<p>REGRESSION LOGISTIQUE</p>
<p>Si la variable à expliquer est non quantitative : -logistique -transforme les variables Glm(modèle, data = …, family = « binomial ») -coeff lu dans estimate lire exp(valeur estimate) a un sens : odd-ratio pour la regresison multiple on rajoute des var explicatives</p>
<p>Hypothèses : au moins 5 à 10 évènements par var explicatives Ex : si une var a expliquer a 54 individus, (age(1), trauma(1) et profession(7)) et 1 + 1 + 7 =9 <em>10(=nbr evenement) = 9054 donc c’est bon ! Ex : 1 + 1 +7 =9</em>5 = 45 54 - passe tout juste pas fou !</p>
<p>Lien recap tests stats https://help.xlstat.com/s/article/guide-de-choix-de-test-statistique?language=fr</p>
<p>ANALYSES DE DONNEES MULTIVARIEES (CF MOOC HUSSON ETC..)</p>
<p>Tableau recap</p>
<p>Recap de sensi et speci d’un test :</p>
<p>Ensuite on définit la sensi comme : Sensi = VP/(VP+FN) c’est donc la proba que le test accepte H0 si elle est vraie Speci = VN/(VN+FP) c’est donc la proba que le test accepte H1 si elle est vraie Ensuite on a la VPP et la VPN : VPP : valeur prédite positive = VP/(VP+FP) et c’est la probabilité que H0 soit vraie lorsque le test conclu à son acceptation VPN : valeur prédite négative = VN/(VN+FN) et c’est la probabilité que H0 soit fausse lorsque le test conclu à son acceptation</p>
<p>Courbe ROC : 1-sensi = f(1-speci) = taux de faux positifs = f(taux de vrais positifs) Et FP = 1- sensi FN = 1 – recall</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a> ]]></description>
  <category>Statistics</category>
  <category>Theory</category>
  <category>R</category>
  <category>Reference</category>
  <guid>https://antoinelucasfra.github.io/posts/stats-theory-frequentist/</guid>
  <pubDate>Mon, 19 Aug 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Getting Started with Quarto for Data Science Reports</title>
  <dc:creator>Antoine Lucas</dc:creator>
  <link>https://antoinelucasfra.github.io/posts/quarto-getting-started/</link>
  <description><![CDATA[ 





<section id="what-is-quarto" class="level2">
<h2 class="anchored" data-anchor-id="what-is-quarto">What is Quarto?</h2>
<p>Quarto is an open-source scientific and technical publishing system that lets you create:</p>
<ul>
<li>Documents (HTML, PDF, Word)</li>
<li>Presentations</li>
<li>Websites and blogs</li>
<li>Books</li>
</ul>
<p>It supports multiple programming languages including R, Python, Julia, and Observable.</p>
</section>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting Started</h2>
<section id="installation" class="level3">
<h3 class="anchored" data-anchor-id="installation">Installation</h3>
<p>Download Quarto from <a href="https://quarto.org/docs/get-started/">quarto.org</a>.</p>
</section>
<section id="your-first-quarto-document" class="level3">
<h3 class="anchored" data-anchor-id="your-first-quarto-document">Your First Quarto Document</h3>
<p>Create a file named <code>report.qmd</code>:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> "My First Report"</span></span>
<span id="cb1-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">author:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> "Antoine Lucas"</span></span>
<span id="cb1-4"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">date:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> today</span></span>
<span id="cb1-5"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">format:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> html</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## Introduction</span></span>
<span id="cb1-9"></span>
<span id="cb1-10">This is my first Quarto document.</span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r}</span></span>
<span id="cb1-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Car Weight vs. Fuel Efficiency"</span>)</span>
<span id="cb1-17"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</section>
<section id="rendering" class="level3">
<h3 class="anchored" data-anchor-id="rendering">Rendering</h3>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">quarto</span> render report.qmd</span></code></pre></div>
</section>
</section>
<section id="key-features" class="level2">
<h2 class="anchored" data-anchor-id="key-features">Key Features</h2>
<section id="code-execution-options" class="level3">
<h3 class="anchored" data-anchor-id="code-execution-options">Code Execution Options</h3>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| echo: true      # Show the code</span></span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| eval: true      # Run the code</span></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| warning: false  # Hide warnings</span></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| fig-width: 8    # Figure width</span></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| fig-height: 6   # Figure height</span></span></code></pre></div>
</section>
<section id="cross-references" class="level3">
<h3 class="anchored" data-anchor-id="cross-references">Cross-References</h3>
<p>Reference figures, tables, and sections:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1">See @fig-scatter for the visualization.</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r}</span></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| label: fig-scatter</span></span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| fig-cap: "Scatter plot of weight vs mpg"</span></span>
<span id="cb4-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span></code></pre></div>
<p>```</p>
</section>
<section id="callouts" class="level3">
<h3 class="anchored" data-anchor-id="callouts">Callouts</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a note callout for additional information.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a warning callout for important caveats.</p>
</div>
</div>
</section>
</section>
<section id="benefits-for-data-science" class="level2">
<h2 class="anchored" data-anchor-id="benefits-for-data-science">Benefits for Data Science</h2>
<ol type="1">
<li><strong>Single source of truth</strong> — Code and narrative together</li>
<li><strong>Multiple output formats</strong> — One document, many formats</li>
<li><strong>Reproducibility</strong> — Anyone can re-run your analysis</li>
<li><strong>Version control friendly</strong> — Plain text format works well with Git</li>
</ol>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Quarto is an excellent tool for creating reproducible data science reports. Start with simple documents and gradually explore its advanced features.</p>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><a href="https://quarto.org/docs/guide/">Quarto Documentation</a></li>
<li><a href="https://quarto.org/docs/gallery/">Quarto Gallery</a></li>
<li><a href="https://github.com/mcanouil/awesome-quarto">Awesome Quarto</a></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a> ]]></description>
  <category>Quarto</category>
  <category>Tutorial</category>
  <category>Reproducibility</category>
  <guid>https://antoinelucasfra.github.io/posts/quarto-getting-started/</guid>
  <pubDate>Tue, 09 Jul 2024 22:00:00 GMT</pubDate>
  <media:content url="https://antoinelucasfra.github.io/posts/quarto-getting-started/featured.png" medium="image" type="image/png"/>
</item>
</channel>
</rss>
