<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Antoine Lucas">
<meta name="dcterms.date" content="2025-06-10">
<meta name="description" content="A comprehensive guide to achieving reproducible data science workflows — environment setup, package management, containerization, and what reproducibility actually means in GxP-regulated pharma contexts.">

<title>The Reproducibility Quest: Modern Tools for R and Python Data Science – Antoine Lucas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/images/profile-pic.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0dc89d91ae56e68db106ebe05eaa7c0e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-0dc89d91ae56e68db106ebe05eaa7c0e.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0dc89d91ae56e68db106ebe05eaa7c0e.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b5867078309af64471e4c42e67d585bc.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-7b483cda5aac4c7db06ab001ef69ef0f.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-b5867078309af64471e4c42e67d585bc.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta property="og:title" content="The Reproducibility Quest: Modern Tools for R and Python Data Science – Antoine Lucas">
<meta property="og:description" content="A comprehensive guide to achieving reproducible data science workflows — environment setup, package management, containerization, and what reproducibility actually means in GxP-regulated pharma contexts.">
<meta property="og:image" content="https://antoinelucasfra.github.io/posts/reproducibility-modern-tools/featured.png">
<meta property="og:site_name" content="Antoine Lucas">
<meta property="og:image:height" content="420">
<meta property="og:image:width" content="800">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Antoine Lucas</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/antoinelucasdata/"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/antoinelucasfra"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#setting-up-your-environment" id="toc-setting-up-your-environment" class="nav-link" data-scroll-target="#setting-up-your-environment">Setting Up Your Environment</a>
  <ul class="collapse">
  <li><a href="#vs-code-as-your-polyglot-ide" id="toc-vs-code-as-your-polyglot-ide" class="nav-link" data-scroll-target="#vs-code-as-your-polyglot-ide">VS Code as your polyglot IDE</a></li>
  <li><a href="#r-install-via-rig-not-cran" id="toc-r-install-via-rig-not-cran" class="nav-link" data-scroll-target="#r-install-via-rig-not-cran">R: install via rig, not CRAN</a></li>
  <li><a href="#python-install-via-uv-not-the-system-python" id="toc-python-install-via-uv-not-the-system-python" class="nav-link" data-scroll-target="#python-install-via-uv-not-the-system-python">Python: install via uv, not the system Python</a></li>
  <li><a href="#formatting-and-linting" id="toc-formatting-and-linting" class="nav-link" data-scroll-target="#formatting-and-linting">Formatting and linting</a></li>
  <li><a href="#notebooks-marimo-over-jupyter" id="toc-notebooks-marimo-over-jupyter" class="nav-link" data-scroll-target="#notebooks-marimo-over-jupyter">Notebooks: marimo over Jupyter</a></li>
  </ul></li>
  <li><a href="#the-reproducibility-spectrum-scoping-your-needs" id="toc-the-reproducibility-spectrum-scoping-your-needs" class="nav-link" data-scroll-target="#the-reproducibility-spectrum-scoping-your-needs">The Reproducibility Spectrum: Scoping Your Needs</a>
  <ul class="collapse">
  <li><a href="#levels-of-reproducibility" id="toc-levels-of-reproducibility" class="nav-link" data-scroll-target="#levels-of-reproducibility">Levels of Reproducibility</a></li>
  <li><a href="#scoping-questions" id="toc-scoping-questions" class="nav-link" data-scroll-target="#scoping-questions">Scoping Questions</a></li>
  <li><a href="#the-reproducibility-tax" id="toc-the-reproducibility-tax" class="nav-link" data-scroll-target="#the-reproducibility-tax">The Reproducibility Tax</a></li>
  </ul></li>
  <li><a href="#the-convergence-r-and-python-are-aligning" id="toc-the-convergence-r-and-python-are-aligning" class="nav-link" data-scroll-target="#the-convergence-r-and-python-are-aligning">The Convergence: R and Python Are Aligning</a>
  <ul class="collapse">
  <li><a href="#shared-principles" id="toc-shared-principles" class="nav-link" data-scroll-target="#shared-principles">Shared Principles</a></li>
  <li><a href="#the-modern-stack-comparison" id="toc-the-modern-stack-comparison" class="nav-link" data-scroll-target="#the-modern-stack-comparison">The Modern Stack Comparison</a></li>
  </ul></li>
  <li><a href="#package-management-the-foundation" id="toc-package-management-the-foundation" class="nav-link" data-scroll-target="#package-management-the-foundation">Package Management: The Foundation</a>
  <ul class="collapse">
  <li><a href="#python-the-uv-revolution" id="toc-python-the-uv-revolution" class="nav-link" data-scroll-target="#python-the-uv-revolution">Python: The uv Revolution</a></li>
  <li><a href="#r-the-rv-revolution" id="toc-r-the-rv-revolution" class="nav-link" data-scroll-target="#r-the-rv-revolution">R: The rv Revolution</a></li>
  <li><a href="#renv-the-established-alternative" id="toc-renv-the-established-alternative" class="nav-link" data-scroll-target="#renv-the-established-alternative">renv: The Established Alternative</a></li>
  <li><a href="#when-to-use-what" id="toc-when-to-use-what" class="nav-link" data-scroll-target="#when-to-use-what">When to Use What</a></li>
  </ul></li>
  <li><a href="#language-version-management" id="toc-language-version-management" class="nav-link" data-scroll-target="#language-version-management">Language Version Management</a>
  <ul class="collapse">
  <li><a href="#r-rig" id="toc-r-rig" class="nav-link" data-scroll-target="#r-rig">R: rig</a></li>
  <li><a href="#python-uv-or-pyenv" id="toc-python-uv-or-pyenv" class="nav-link" data-scroll-target="#python-uv-or-pyenv">Python: uv or pyenv</a></li>
  </ul></li>
  <li><a href="#environment-control-devcontainers" id="toc-environment-control-devcontainers" class="nav-link" data-scroll-target="#environment-control-devcontainers">Environment Control: DevContainers</a>
  <ul class="collapse">
  <li><a href="#what-are-devcontainers" id="toc-what-are-devcontainers" class="nav-link" data-scroll-target="#what-are-devcontainers">What Are DevContainers?</a></li>
  <li><a href="#when-to-use-devcontainers" id="toc-when-to-use-devcontainers" class="nav-link" data-scroll-target="#when-to-use-devcontainers">When to Use DevContainers</a></li>
  <li><a href="#r-specific-devcontainers-with-rocker" id="toc-r-specific-devcontainers-with-rocker" class="nav-link" data-scroll-target="#r-specific-devcontainers-with-rocker">R-Specific DevContainers with Rocker</a></li>
  <li><a href="#multi-language-devcontainer" id="toc-multi-language-devcontainer" class="nav-link" data-scroll-target="#multi-language-devcontainer">Multi-Language DevContainer</a></li>
  </ul></li>
  <li><a href="#workflow-orchestration" id="toc-workflow-orchestration" class="nav-link" data-scroll-target="#workflow-orchestration">Workflow Orchestration</a>
  <ul class="collapse">
  <li><a href="#snakemake" id="toc-snakemake" class="nav-link" data-scroll-target="#snakemake">Snakemake</a></li>
  </ul></li>
  <li><a href="#documentation-quarto" id="toc-documentation-quarto" class="nav-link" data-scroll-target="#documentation-quarto">Documentation: Quarto</a></li>
  <li><a href="#organizational-considerations" id="toc-organizational-considerations" class="nav-link" data-scroll-target="#organizational-considerations">Organizational Considerations</a>
  <ul class="collapse">
  <li><a href="#team-standards" id="toc-team-standards" class="nav-link" data-scroll-target="#team-standards">Team Standards</a></li>
  <li><a href="#building-a-reproducibility-culture" id="toc-building-a-reproducibility-culture" class="nav-link" data-scroll-target="#building-a-reproducibility-culture">Building a Reproducibility Culture</a></li>
  <li><a href="#the-cost-benefit-reality" id="toc-the-cost-benefit-reality" class="nav-link" data-scroll-target="#the-cost-benefit-reality">The Cost-Benefit Reality</a></li>
  </ul></li>
  <li><a href="#regulated-environments-reproducibility-in-pharma-and-good-practices-gxp" id="toc-regulated-environments-reproducibility-in-pharma-and-good-practices-gxp" class="nav-link" data-scroll-target="#regulated-environments-reproducibility-in-pharma-and-good-practices-gxp">Regulated Environments: Reproducibility in Pharma and Good Practices (GxP)</a>
  <ul class="collapse">
  <li><a href="#what-fda-and-ema-actually-expect" id="toc-what-fda-and-ema-actually-expect" class="nav-link" data-scroll-target="#what-fda-and-ema-actually-expect">What FDA and EMA actually expect</a></li>
  <li><a href="#sessioninfo-is-necessary-but-not-sufficient" id="toc-sessioninfo-is-necessary-but-not-sufficient" class="nav-link" data-scroll-target="#sessioninfo-is-necessary-but-not-sufficient">sessionInfo() is necessary but not sufficient</a></li>
  <li><a href="#renv-docker-as-a-practical-iqoqpq-story" id="toc-renv-docker-as-a-practical-iqoqpq-story" class="nav-link" data-scroll-target="#renv-docker-as-a-practical-iqoqpq-story">renv + Docker as a practical IQ/OQ/PQ story</a></li>
  <li><a href="#the-practical-minimum-for-regulatory-r-work" id="toc-the-practical-minimum-for-regulatory-r-work" class="nav-link" data-scroll-target="#the-practical-minimum-for-regulatory-r-work">The practical minimum for regulatory R work</a></li>
  </ul></li>
  <li><a href="#the-complete-reproducibility-checklist" id="toc-the-complete-reproducibility-checklist" class="nav-link" data-scroll-target="#the-complete-reproducibility-checklist">The Complete Reproducibility Checklist</a>
  <ul class="collapse">
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure">Project Structure</a></li>
  <li><a href="#by-level" id="toc-by-level" class="nav-link" data-scroll-target="#by-level">By Level</a></li>
  </ul></li>
  <li><a href="#summary-the-modern-reproducibility-toolkit" id="toc-summary-the-modern-reproducibility-toolkit" class="nav-link" data-scroll-target="#summary-the-modern-reproducibility-toolkit">Summary: The Modern Reproducibility Toolkit</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/antoinelucasfra/antoinelucasfra.github.io/edit/main/posts/reproducibility-modern-tools/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/antoinelucasfra/antoinelucasfra.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Reproducibility Quest: Modern Tools for R and Python Data Science</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Python</div>
    <div class="quarto-category">Reproducibility</div>
    <div class="quarto-category">DevContainers</div>
    <div class="quarto-category">Docker</div>
    <div class="quarto-category">Package Management</div>
    <div class="quarto-category">Best Practices</div>
    <div class="quarto-category">VS Code</div>
    <div class="quarto-category">GxP</div>
    <div class="quarto-category">Pharma</div>
    <div class="quarto-category">Setup</div>
  </div>
  </div>

<div>
  <div class="description">
    A comprehensive guide to achieving reproducible data science workflows — environment setup, package management, containerization, and what reproducibility actually means in GxP-regulated pharma contexts.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Antoine Lucas </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Reproducibility is <span class="highlight" data-bg-colour="gold" data-colour="navy">the cornerstone of credible data science</span>. Whether you’re in academia, pharma, finance, or tech, the ability to recreate your analysis environment and results is essential. Yet achieving true reproducibility has historically been painful — a maze of version conflicts, missing dependencies, and the dreaded “works on my machine” syndrome.</p>
<p>The good news? We’re living in a golden age of reproducibility tooling. Both R and Python ecosystems have evolved dramatically, offering modern solutions that make reproducible workflows not just possible, but practical. This post covers the complete picture: from setting up a solid development environment in the first place, through package management and containerization, to what reproducibility actually requires when you’re working under regulatory constraints.</p>
<p>But before diving into tools, let’s address a crucial question: <strong>how much reproducibility do you actually need?</strong></p>
<hr>
</section>
<section id="setting-up-your-environment" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-your-environment">Setting Up Your Environment</h2>
<p>Before you can have a reproducible workflow, you need a consistent development environment. This matters more than most people realise — subtle differences between machines (R versions, system libraries, editor settings) cause problems that are hard to debug and impossible to prevent without a baseline setup.</p>
<section id="vs-code-as-your-polyglot-ide" class="level3">
<h3 class="anchored" data-anchor-id="vs-code-as-your-polyglot-ide">VS Code as your polyglot IDE</h3>
<p>If you write both R and Python, VS Code is the only reasonable choice. RStudio is excellent for pure R work but does not handle Python well. PyCharm goes the other way. VS Code handles both, plus Quarto, plus Bash, plus whatever else you need.</p>
<p>The extensions that actually matter for a data science setup:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Extension</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>REditorSupport.r</code></td>
<td>R language support, inline output, completion</td>
</tr>
<tr class="even">
<td><code>Posit.air-vscode</code></td>
<td>R formatter (air) — format-on-save</td>
</tr>
<tr class="odd">
<td><code>ms-python.python</code></td>
<td>Python language support</td>
</tr>
<tr class="even">
<td><code>charliermarsh.ruff</code></td>
<td>Python formatter + linter (ruff) — format-on-save</td>
</tr>
<tr class="odd">
<td><code>quarto.quarto</code></td>
<td>Quarto rendering, preview, syntax</td>
</tr>
<tr class="even">
<td><code>mcanouil.quarto-wizard</code></td>
<td>Extension manager for Quarto</td>
</tr>
<tr class="odd">
<td><code>ms-toolsai.jupyter</code></td>
<td>Jupyter kernel support</td>
</tr>
<tr class="even">
<td><code>marimo-team.vscode-marimo</code></td>
<td>marimo reactive notebook support</td>
</tr>
<tr class="odd">
<td><code>usernamehw.errorlens</code></td>
<td>Inline linting errors (R and Python)</td>
</tr>
</tbody>
</table>
<p>A minimal <code>settings.json</code> that wires everything together:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-1"><pre class="sourceCode json code-annotation-code code-with-copy code-annotated"><code class="sourceCode json"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="annotated-cell-1-2"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"[r]"</span><span class="fu">:</span> <span class="fu">{</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.defaultFormatter"</span><span class="fu">:</span> <span class="st">"Posit.air-vscode"</span><span class="fu">,</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-4" class="code-annotation-target"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.formatOnSave"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="annotated-cell-1-5"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="annotated-cell-1-6"><a href="#annotated-cell-1-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"[python]"</span><span class="fu">:</span> <span class="fu">{</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="3">3</button><span id="annotated-cell-1-7" class="code-annotation-target"><a href="#annotated-cell-1-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.defaultFormatter"</span><span class="fu">:</span> <span class="st">"charliermarsh.ruff"</span><span class="fu">,</span></span>
<span id="annotated-cell-1-8"><a href="#annotated-cell-1-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.formatOnSave"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="annotated-cell-1-9"><a href="#annotated-cell-1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="4">4</button><span id="annotated-cell-1-10" class="code-annotation-target"><a href="#annotated-cell-1-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"r.useRenvLibPath"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="5">5</button><span id="annotated-cell-1-11" class="code-annotation-target"><a href="#annotated-cell-1-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"r.rterm.option"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"--no-save"</span><span class="ot">,</span> <span class="st">"--no-restore-data"</span><span class="ot">,</span> <span class="st">"--quiet"</span><span class="ot">]</span><span class="fu">,</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="6">6</button><span id="annotated-cell-1-12" class="code-annotation-target"><a href="#annotated-cell-1-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"python.defaultInterpreterPath"</span><span class="fu">:</span> <span class="st">"${workspaceFolder}/.venv/bin/python"</span><span class="fu">,</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="7">7</button><span id="annotated-cell-1-13" class="code-annotation-target"><a href="#annotated-cell-1-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"editor.rulers"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">88</span><span class="ot">]</span></span>
<span id="annotated-cell-1-14"><a href="#annotated-cell-1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="3" data-code-annotation="1">Use <code>air</code> (Posit’s Rust-based formatter) as the default R formatter — replaces <code>styler</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="4,8" data-code-annotation="2">Auto-format on every save — no manual <code>air format .</code> needed during editing.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="7" data-code-annotation="3">Use <code>ruff</code> as formatter for Python — one tool replaces <code>black</code>, <code>isort</code>, and <code>flake8</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="10" data-code-annotation="4">Tell the R extension to use the <code>renv</code> project library instead of the system library.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="11" data-code-annotation="5">Start R sessions without loading <code>.RData</code> — prevents stale objects from contaminating fresh runs.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="12" data-code-annotation="6">Point Python to the project-local <code>.venv</code> — ensures <code>uv</code>-managed packages are picked up.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="13" data-code-annotation="7">Draw a vertical ruler at column 88 — the default line-length limit used by <code>ruff</code>.</span>
</dd>
</dl>
</section>
<section id="r-install-via-rig-not-cran" class="level3">
<h3 class="anchored" data-anchor-id="r-install-via-rig-not-cran">R: install via rig, not CRAN</h3>
<p><a href="https://github.com/r-lib/rig">rig</a> is the R Installation Manager. Install it once, then install and switch between R versions cleanly:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-2"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># macOS</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-2" class="code-annotation-target"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> tap r-lib/rig <span class="kw">&amp;&amp;</span> <span class="ex">brew</span> install rig</span>
<span id="annotated-cell-2-3"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Linux</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2">2</button><span id="annotated-cell-2-5" class="code-annotation-target"><a href="#annotated-cell-2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> https://rig.r-lib.org/rig-linux-latest.tar.gz <span class="kw">|</span> <span class="fu">sudo</span> tar xz <span class="at">-C</span> /usr/local</span>
<span id="annotated-cell-2-6"><a href="#annotated-cell-2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-2-7"><a href="#annotated-cell-2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Install a specific R version</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3">3</button><span id="annotated-cell-2-8" class="code-annotation-target"><a href="#annotated-cell-2-8" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> add 4.5</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="4">4</button><span id="annotated-cell-2-9" class="code-annotation-target"><a href="#annotated-cell-2-9" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> default 4.5</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="2" data-code-annotation="1">Install <code>rig</code> via Homebrew on macOS — the one-time setup step.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="5" data-code-annotation="2">Linux alternative: download and extract the binary to <code>/usr/local</code> with <code>sudo</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="8" data-code-annotation="3">Install R 4.5 — <code>rig add</code> downloads and sets up that exact version without touching other installations.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="9" data-code-annotation="4">Set R 4.5 as the default version system-wide.</span>
</dd>
</dl>
<p>Never install R by downloading from CRAN. <code>rig</code> makes version switching trivial and doesn’t pollute your system.</p>
</section>
<section id="python-install-via-uv-not-the-system-python" class="level3">
<h3 class="anchored" data-anchor-id="python-install-via-uv-not-the-system-python">Python: install via uv, not the system Python</h3>
<p><a href="https://docs.astral.sh/uv/">uv</a> manages Python versions and virtual environments. The system Python should never be touched for project work:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-3"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><span id="annotated-cell-3-1"><a href="#annotated-cell-3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install uv</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="1">1</button><span id="annotated-cell-3-2" class="code-annotation-target"><a href="#annotated-cell-3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-LsSf</span> https://astral.sh/uv/install.sh <span class="kw">|</span> <span class="fu">sh</span></span>
<span id="annotated-cell-3-3"><a href="#annotated-cell-3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-3-4"><a href="#annotated-cell-3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install and pin a Python version for a project</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="2">2</button><span id="annotated-cell-3-5" class="code-annotation-target"><a href="#annotated-cell-3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python install 3.12</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="3">3</button><span id="annotated-cell-3-6" class="code-annotation-target"><a href="#annotated-cell-3-6" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python pin 3.12</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-3" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="2" data-code-annotation="1">One-liner installer — writes a <code>uv</code> binary to <code>~/.cargo/bin</code> (or <code>~/.local/bin</code>). No admin rights needed.</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="5" data-code-annotation="2">Download and install CPython 3.12 — managed entirely by <code>uv</code>, isolated from the system Python.</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="6" data-code-annotation="3">Write a <code>.python-version</code> file pinning this project to 3.12 — respected by <code>uv run</code> and <code>uv sync</code>.</span>
</dd>
</dl>
</section>
<section id="formatting-and-linting" class="level3">
<h3 class="anchored" data-anchor-id="formatting-and-linting">Formatting and linting</h3>
<ul>
<li><strong>R:</strong> <code>air</code> — a Rust-based formatter from Posit. Fast, opinionated, and it replaces <code>styler</code>. Never use <code>formatR</code>. Configure via <code>air.toml</code> at project root.</li>
<li><strong>Python:</strong> <code>ruff</code> — formatter and linter in one. Replaces <code>black</code>, <code>isort</code>, <code>flake8</code>. Configure via <code>pyproject.toml</code>.</li>
</ul>
<p>Both integrate with VS Code for format-on-save. This matters for reproducibility in a non-obvious way: consistent formatting means diffs are about logic, not whitespace, which makes code review and change tracking actually useful.</p>
</section>
<section id="notebooks-marimo-over-jupyter" class="level3">
<h3 class="anchored" data-anchor-id="notebooks-marimo-over-jupyter">Notebooks: marimo over Jupyter</h3>
<p>If you write Python notebooks, <a href="https://marimo.io/">marimo</a> is worth evaluating. It’s reactive (cells re-execute when their dependencies change), stores notebooks as pure Python scripts (Git-friendly, no JSON blob), and has a better story for reproducibility than classical Jupyter. For R, Quarto documents are the right answer for anything that isn’t pure exploration.</p>
<hr>
</section>
</section>
<section id="the-reproducibility-spectrum-scoping-your-needs" class="level2">
<h2 class="anchored" data-anchor-id="the-reproducibility-spectrum-scoping-your-needs">The Reproducibility Spectrum: Scoping Your Needs</h2>
<p>Not every project requires the same level of reproducibility investment. A quick exploratory analysis for an internal meeting doesn’t need the same rigor as a clinical trial submission to the U.S. Food and Drug Administration (FDA). Understanding where your project falls on this spectrum is essential for efficient resource allocation.</p>
<section id="levels-of-reproducibility" class="level3">
<h3 class="anchored" data-anchor-id="levels-of-reproducibility">Levels of Reproducibility</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 25%">
<col style="width: 37%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th>Level</th>
<th>Description</th>
<th>Typical Use Cases</th>
<th>Investment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>L1: Minimal</strong></td>
<td>Code runs on author’s machine</td>
<td>Personal exploration, quick prototypes</td>
<td>Low</td>
</tr>
<tr class="even">
<td><strong>L2: Documented</strong></td>
<td>README with manual setup instructions</td>
<td>Team projects, handoffs</td>
<td>Low-Medium</td>
</tr>
<tr class="odd">
<td><strong>L3: Lockfile</strong></td>
<td>Pinned package versions</td>
<td>Production analyses, shared projects</td>
<td>Medium</td>
</tr>
<tr class="even">
<td><strong>L4: Containerized</strong></td>
<td>Full environment specification</td>
<td>Regulated industries, long-term archives</td>
<td>Medium-High</td>
</tr>
<tr class="odd">
<td><strong>L5: Fully Isolated</strong></td>
<td>Container + data versioning + workflow</td>
<td>Clinical trials, financial audits</td>
<td>High</td>
</tr>
</tbody>
</table>
</section>
<section id="scoping-questions" class="level3">
<h3 class="anchored" data-anchor-id="scoping-questions">Scoping Questions</h3>
<p>Before setting up your reproducibility stack, ask:</p>
<ol type="1">
<li><strong>Who needs to reproduce this?</strong>
<ul>
<li>Just me, in 6 months? → L2-L3</li>
<li>My team? → L3</li>
<li>External auditors? → L4-L5</li>
<li>The entire scientific community? → L5</li>
</ul></li>
<li><strong>What’s the regulatory context?</strong>
<ul>
<li>Internal exploration → L1-L2</li>
<li>Published research → L3-L4</li>
<li>Regulatory submission → L5</li>
</ul></li>
<li><strong>What’s the project lifespan?</strong>
<ul>
<li>One-off analysis → L1-L2</li>
<li>Quarterly reports → L3</li>
<li>Multi-year project → L4-L5</li>
</ul></li>
<li><strong>What’s the cost of failure?</strong>
<ul>
<li>Learning exercise → L1</li>
<li>Business decision → L3</li>
<li>Patient safety → L5</li>
</ul></li>
</ol>
</section>
<section id="the-reproducibility-tax" class="level3">
<h3 class="anchored" data-anchor-id="the-reproducibility-tax">The Reproducibility Tax</h3>
<p>Every level of reproducibility adds friction:</p>
<ul>
<li><strong>L1→L2</strong>: Writing documentation (minutes)</li>
<li><strong>L2→L3</strong>: Managing lockfiles, occasional dependency conflicts (hours)</li>
<li><strong>L3→L4</strong>: Container setup, debugging build issues (days initially)</li>
<li><strong>L4→L5</strong>: Data versioning, workflow management, continuous integration/continuous deployment (CI/CD) (ongoing effort)</li>
</ul>
<p>The goal is to pay the <em>right</em> amount of tax for your context — not more, not less.</p>
<hr>
</section>
</section>
<section id="the-convergence-r-and-python-are-aligning" class="level2">
<h2 class="anchored" data-anchor-id="the-convergence-r-and-python-are-aligning">The Convergence: R and Python Are Aligning</h2>
<p>Something remarkable is happening: the R and Python ecosystems are converging on similar reproducibility paradigms. This isn’t coincidental — it reflects hard-won lessons about what works.</p>
<section id="shared-principles" class="level3">
<h3 class="anchored" data-anchor-id="shared-principles">Shared Principles</h3>
<p>Both communities have arrived at the same conclusions:</p>
<ol type="1">
<li><strong>Declarative over imperative</strong> — Define desired state, not installation steps</li>
<li><strong>Lockfiles are essential</strong> — Capture exact versions at installation time</li>
<li><strong>TOML for configuration</strong> — Human-readable, standardized format</li>
<li><strong>Rust for tooling</strong> — Performance matters for developer experience</li>
<li><strong>Holistic resolution</strong> — Solve the entire dependency tree before installing</li>
</ol>
</section>
<section id="the-modern-stack-comparison" class="level3">
<h3 class="anchored" data-anchor-id="the-modern-stack-comparison">The Modern Stack Comparison</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 24%">
<col style="width: 9%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Concept</th>
<th>Python</th>
<th>R</th>
<th>Convergence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Package manager</td>
<td>uv</td>
<td>rv</td>
<td>Both Rust, declarative, TOML-based</td>
</tr>
<tr class="even">
<td>Config file</td>
<td><code>pyproject.toml</code></td>
<td><code>rproject.toml</code></td>
<td>Same format, similar structure</td>
</tr>
<tr class="odd">
<td>Lockfile</td>
<td><code>uv.lock</code></td>
<td><code>rv.lock</code></td>
<td>Same purpose, similar approach</td>
</tr>
<tr class="even">
<td>Version manager</td>
<td>uv, pyenv</td>
<td>rig</td>
<td>CLI-based, multiple versions</td>
</tr>
<tr class="odd">
<td>Formatter</td>
<td>ruff</td>
<td>air</td>
<td>Fast, opinionated, Rust-based</td>
</tr>
<tr class="even">
<td>Containers</td>
<td>devcontainers</td>
<td>devcontainers + Rocker</td>
<td>Same specification</td>
</tr>
</tbody>
</table>
<p>This convergence means skills transfer between languages, and polyglot projects become easier to manage.</p>
<hr>
</section>
</section>
<section id="package-management-the-foundation" class="level2">
<h2 class="anchored" data-anchor-id="package-management-the-foundation">Package Management: The Foundation</h2>
<section id="python-the-uv-revolution" class="level3">
<h3 class="anchored" data-anchor-id="python-the-uv-revolution">Python: The uv Revolution</h3>
<p><a href="https://docs.astral.sh/uv/">uv</a> has fundamentally changed Python package management. Written in Rust, it’s blazingly fast and consolidates what used to require multiple tools (pyenv, pip, virtualenv, pip-tools) into one coherent experience.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-4"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><span id="annotated-cell-4-1"><a href="#annotated-cell-4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install uv</span></span>
<span id="annotated-cell-4-2"><a href="#annotated-cell-4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-LsSf</span> https://astral.sh/uv/install.sh <span class="kw">|</span> <span class="fu">sh</span></span>
<span id="annotated-cell-4-3"><a href="#annotated-cell-4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-4"><a href="#annotated-cell-4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new project</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="1">1</button><span id="annotated-cell-4-5" class="code-annotation-target"><a href="#annotated-cell-4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> init my-analysis</span>
<span id="annotated-cell-4-6"><a href="#annotated-cell-4-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-analysis</span>
<span id="annotated-cell-4-7"><a href="#annotated-cell-4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-8"><a href="#annotated-cell-4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add dependencies</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="2">2</button><span id="annotated-cell-4-9" class="code-annotation-target"><a href="#annotated-cell-4-9" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> add pandas numpy scikit-learn matplotlib</span>
<span id="annotated-cell-4-10"><a href="#annotated-cell-4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-11"><a href="#annotated-cell-4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Sync environment</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="3">3</button><span id="annotated-cell-4-12" class="code-annotation-target"><a href="#annotated-cell-4-12" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> sync</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="5" data-code-annotation="1">Scaffold a new project: creates <code>pyproject.toml</code>, <code>README.md</code>, and a <code>hello.py</code> stub.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="9" data-code-annotation="2">Add packages to <code>pyproject.toml</code> and install them into the project’s <code>.venv</code> in one step.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="12" data-code-annotation="3">Recreate <code>.venv</code> from the lockfile — ensures every collaborator gets bit-for-bit identical packages.</span>
</dd>
</dl>
<p>The <code>pyproject.toml</code> becomes your single source of truth:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-5"><pre class="sourceCode toml code-annotation-code code-with-copy code-annotated"><code class="sourceCode toml"><span id="annotated-cell-5-1"><a href="#annotated-cell-5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="annotated-cell-5-2"><a href="#annotated-cell-5-2" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">"my-analysis"</span></span>
<span id="annotated-cell-5-3"><a href="#annotated-cell-5-3" aria-hidden="true" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">"0.1.0"</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="1">1</button><span id="annotated-cell-5-4" class="code-annotation-target"><a href="#annotated-cell-5-4" aria-hidden="true" tabindex="-1"></a><span class="dt">requires-python</span> <span class="op">=</span> <span class="st">"&gt;=3.11"</span></span>
<span id="annotated-cell-5-5"><a href="#annotated-cell-5-5" aria-hidden="true" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="annotated-cell-5-6"><a href="#annotated-cell-5-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pandas&gt;=2.0"</span><span class="op">,</span></span>
<span id="annotated-cell-5-7"><a href="#annotated-cell-5-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"numpy&gt;=1.24"</span><span class="op">,</span></span>
<span id="annotated-cell-5-8"><a href="#annotated-cell-5-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"scikit-learn&gt;=1.3"</span><span class="op">,</span></span>
<span id="annotated-cell-5-9"><a href="#annotated-cell-5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"matplotlib&gt;=3.7"</span><span class="op">,</span></span>
<span id="annotated-cell-5-10"><a href="#annotated-cell-5-10" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="annotated-cell-5-11"><a href="#annotated-cell-5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-12"><a href="#annotated-cell-5-12" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.uv]</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="2">2</button><span id="annotated-cell-5-13" class="code-annotation-target"><a href="#annotated-cell-5-13" aria-hidden="true" tabindex="-1"></a><span class="dt">dev-dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="annotated-cell-5-14"><a href="#annotated-cell-5-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pytest&gt;=7.0"</span><span class="op">,</span></span>
<span id="annotated-cell-5-15"><a href="#annotated-cell-5-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ruff&gt;=0.1"</span><span class="op">,</span></span>
<span id="annotated-cell-5-16"><a href="#annotated-cell-5-16" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="4" data-code-annotation="1">Minimum Python version constraint — <code>uv</code> enforces this and will refuse to create an incompatible environment.</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="13" data-code-annotation="2">Dev-only dependencies not installed in production or CI — keeps the deployment environment lean.</span>
</dd>
</dl>
<p>Key features that make <code>uv</code> essential:</p>
<ul>
<li><strong>Lockfile (<code>uv.lock</code>)</strong> — Captures exact versions for reproducibility</li>
<li><strong>Python version management</strong> — No need for separate pyenv</li>
<li><strong>Blazing fast</strong> — 10-100x faster than pip</li>
<li><strong>Declarative</strong> — Describe what you want, not how to get there</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># uv can manage Python versions too</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python install 3.12</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python pin 3.11</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Run scripts with automatic environment setup</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> run python analysis.py</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="r-the-rv-revolution" class="level3">
<h3 class="anchored" data-anchor-id="r-the-rv-revolution">R: The rv Revolution</h3>
<p>On the R side, <a href="https://a2-ai.github.io/rv-docs/">rv</a> brings the same declarative philosophy. If you’ve been using <code>renv</code>, <code>rv</code> will feel like a significant upgrade.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-7"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><span id="annotated-cell-7-1"><a href="#annotated-cell-7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install rv</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="1">1</button><span id="annotated-cell-7-2" class="code-annotation-target"><a href="#annotated-cell-7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-sSL</span> https://raw.githubusercontent.com/A2-ai/rv/refs/heads/main/scripts/install.sh <span class="kw">|</span> <span class="fu">bash</span></span>
<span id="annotated-cell-7-3"><a href="#annotated-cell-7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-7-4"><a href="#annotated-cell-7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new project</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="2">2</button><span id="annotated-cell-7-5" class="code-annotation-target"><a href="#annotated-cell-7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">rv</span> init my-analysis</span>
<span id="annotated-cell-7-6"><a href="#annotated-cell-7-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-analysis</span>
<span id="annotated-cell-7-7"><a href="#annotated-cell-7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-7-8"><a href="#annotated-cell-7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add dependencies</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="3">3</button><span id="annotated-cell-7-9" class="code-annotation-target"><a href="#annotated-cell-7-9" aria-hidden="true" tabindex="-1"></a><span class="ex">rv</span> add tidyverse arrow DBI</span>
<span id="annotated-cell-7-10"><a href="#annotated-cell-7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-7-11"><a href="#annotated-cell-7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Sync</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="4">4</button><span id="annotated-cell-7-12" class="code-annotation-target"><a href="#annotated-cell-7-12" aria-hidden="true" tabindex="-1"></a><span class="ex">rv</span> sync</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="2" data-code-annotation="1">One-liner install — downloads the <code>rv</code> binary and places it on your <code>PATH</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="5" data-code-annotation="2">Initialise the project: creates <code>rproject.toml</code> with the current R version pre-filled.</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="9" data-code-annotation="3">Add packages to <code>rproject.toml</code> — <code>rv</code> resolves and installs them immediately.</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="12" data-code-annotation="4">Install all declared packages into the project library — the equivalent of <code>renv::restore()</code> but driven by a declarative manifest.</span>
</dd>
</dl>
<p>Your <code>rproject.toml</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-8"><pre class="sourceCode toml code-annotation-code code-with-copy code-annotated"><code class="sourceCode toml"><span id="annotated-cell-8-1"><a href="#annotated-cell-8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="annotated-cell-8-2"><a href="#annotated-cell-8-2" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">"my-analysis"</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="1">1</button><span id="annotated-cell-8-3" class="code-annotation-target"><a href="#annotated-cell-8-3" aria-hidden="true" tabindex="-1"></a><span class="dt">r_version</span> <span class="op">=</span> <span class="st">"4.5"</span></span>
<span id="annotated-cell-8-4"><a href="#annotated-cell-8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-8-5"><a href="#annotated-cell-8-5" aria-hidden="true" tabindex="-1"></a><span class="dt">repositories</span> <span class="op">=</span> <span class="op">[</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="2">2</button><span id="annotated-cell-8-6" class="code-annotation-target"><a href="#annotated-cell-8-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{ </span><span class="dt">alias</span><span class="op"> =</span> <span class="st">"PPM"</span><span class="op">, </span><span class="dt">url</span><span class="op"> =</span> <span class="st">"https://packagemanager.posit.co/cran/latest"</span><span class="op"> },</span></span>
<span id="annotated-cell-8-7"><a href="#annotated-cell-8-7" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="annotated-cell-8-8"><a href="#annotated-cell-8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-8-9"><a href="#annotated-cell-8-9" aria-hidden="true" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="annotated-cell-8-10"><a href="#annotated-cell-8-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tidyverse"</span><span class="op">,</span></span>
<span id="annotated-cell-8-11"><a href="#annotated-cell-8-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"arrow"</span><span class="op">,</span></span>
<span id="annotated-cell-8-12"><a href="#annotated-cell-8-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DBI"</span><span class="op">,</span></span>
<span id="annotated-cell-8-13"><a href="#annotated-cell-8-13" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-8" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="3" data-code-annotation="1">Pins the exact R version — <code>rv</code> will warn if you try to sync on a different version.</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="6" data-code-annotation="2">Use Posit Package Manager (PPM) instead of CRAN — provides pre-built binaries, dramatically faster installs on Linux.</span>
</dd>
</dl>
</section>
<section id="renv-the-established-alternative" class="level3">
<h3 class="anchored" data-anchor-id="renv-the-established-alternative">renv: The Established Alternative</h3>
<p>While <code>rv</code> is the future, <a href="https://rstudio.github.io/renv/">renv</a> remains the most widely adopted solution:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize renv</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">init</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install packages as usual</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Snapshot your dependencies</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">snapshot</span>()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Restore on another machine</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The key difference: <code>renv</code> is reactive (snapshot after installation), while <code>rv</code> is declarative (define desired state, then sync).</p>
</section>
<section id="when-to-use-what" class="level3">
<h3 class="anchored" data-anchor-id="when-to-use-what">When to Use What</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 47%">
<col style="width: 38%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Scenario</th>
<th>Python</th>
<th>R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>New projects</td>
<td>uv</td>
<td>rv</td>
</tr>
<tr class="even">
<td>Legacy projects</td>
<td>pip + requirements.txt</td>
<td>renv</td>
</tr>
<tr class="odd">
<td>Corporate environments</td>
<td>uv (or pip if restricted)</td>
<td>renv (more established)</td>
</tr>
<tr class="even">
<td>Bleeding edge</td>
<td>uv</td>
<td>rv</td>
</tr>
<tr class="odd">
<td>Maximum compatibility</td>
<td>pip</td>
<td>renv</td>
</tr>
</tbody>
</table>
<hr>
</section>
</section>
<section id="language-version-management" class="level2">
<h2 class="anchored" data-anchor-id="language-version-management">Language Version Management</h2>
<section id="r-rig" class="level3">
<h3 class="anchored" data-anchor-id="r-rig">R: rig</h3>
<p><a href="https://github.com/r-lib/rig">rig</a> is the R Installation Manager — think of it as pyenv for R:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install rig (macOS)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> tap r-lib/rig <span class="kw">&amp;&amp;</span> <span class="ex">brew</span> install rig</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install rig (Linux)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> https://rig.r-lib.org/rig-linux-latest.tar.gz <span class="kw">|</span> <span class="fu">sudo</span> tar xz <span class="at">-C</span> /usr/local</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># List available versions</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> available</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Install specific version</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> add 4.5</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> add 4.4</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch between versions</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> default 4.5</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># List installed versions</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="ex">rig</span> list</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-uv-or-pyenv" class="level3">
<h3 class="anchored" data-anchor-id="python-uv-or-pyenv">Python: uv or pyenv</h3>
<p><code>uv</code> now handles Python version management directly:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Python 3.12</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python install 3.12</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pin project to specific version</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python pin 3.11</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># List installed versions</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> python list</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Alternatively, <a href="https://github.com/pyenv/pyenv">pyenv</a> remains a solid choice:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install pyenv</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> https://pyenv.run <span class="kw">|</span> <span class="fu">bash</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Python version</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pyenv</span> install 3.11.6</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set local version for project</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pyenv</span> local 3.11.6</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="environment-control-devcontainers" class="level2">
<h2 class="anchored" data-anchor-id="environment-control-devcontainers">Environment Control: DevContainers</h2>
<p>Package managers handle libraries, but what about system dependencies? OpenSSL, GDAL, database drivers, C compilers… these often cause the most painful reproducibility issues.</p>
<section id="what-are-devcontainers" class="level3">
<h3 class="anchored" data-anchor-id="what-are-devcontainers">What Are DevContainers?</h3>
<p><a href="https://containers.dev/">Development Containers</a> provide a complete, containerized development environment. They’re Docker containers configured specifically for development, with full integrated development environment (IDE) integration.</p>
<p>A <code>.devcontainer/devcontainer.json</code> defines your environment:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="annotated-cell-13"><pre class="sourceCode json code-annotation-code code-with-copy code-annotated"><code class="sourceCode json"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="annotated-cell-13-2"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"R &amp; Python Data Science"</span><span class="fu">,</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1">1</button><span id="annotated-cell-13-3" class="code-annotation-target"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"image"</span><span class="fu">:</span> <span class="st">"ghcr.io/rocker-org/devcontainer/tidyverse:4.4"</span><span class="fu">,</span></span>
<span id="annotated-cell-13-4"><a href="#annotated-cell-13-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"features"</span><span class="fu">:</span> <span class="fu">{</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2">2</button><span id="annotated-cell-13-5" class="code-annotation-target"><a href="#annotated-cell-13-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"ghcr.io/rocker-org/devcontainer-features/quarto-cli:1"</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="annotated-cell-13-6"><a href="#annotated-cell-13-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"ghcr.io/devcontainers/features/python:1"</span><span class="fu">:</span> <span class="fu">{</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="3">3</button><span id="annotated-cell-13-7" class="code-annotation-target"><a href="#annotated-cell-13-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"version"</span><span class="fu">:</span> <span class="st">"3.11"</span></span>
<span id="annotated-cell-13-8"><a href="#annotated-cell-13-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="annotated-cell-13-9"><a href="#annotated-cell-13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="annotated-cell-13-10"><a href="#annotated-cell-13-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"customizations"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="annotated-cell-13-11"><a href="#annotated-cell-13-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"vscode"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="annotated-cell-13-12"><a href="#annotated-cell-13-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"extensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="annotated-cell-13-13"><a href="#annotated-cell-13-13" aria-hidden="true" tabindex="-1"></a>                <span class="st">"REditorSupport.r"</span><span class="ot">,</span></span>
<span id="annotated-cell-13-14"><a href="#annotated-cell-13-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ms-python.python"</span><span class="ot">,</span></span>
<span id="annotated-cell-13-15"><a href="#annotated-cell-13-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">"quarto.quarto"</span></span>
<span id="annotated-cell-13-16"><a href="#annotated-cell-13-16" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="annotated-cell-13-17"><a href="#annotated-cell-13-17" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"settings"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="annotated-cell-13-18"><a href="#annotated-cell-13-18" aria-hidden="true" tabindex="-1"></a>                <span class="dt">"r.rterm.linux"</span><span class="fu">:</span> <span class="st">"/usr/local/bin/R"</span></span>
<span id="annotated-cell-13-19"><a href="#annotated-cell-13-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="annotated-cell-13-20"><a href="#annotated-cell-13-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="annotated-cell-13-21"><a href="#annotated-cell-13-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="4">4</button><span id="annotated-cell-13-22" class="code-annotation-target"><a href="#annotated-cell-13-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"postCreateCommand"</span><span class="fu">:</span> <span class="st">"uv sync &amp;&amp; rv sync"</span></span>
<span id="annotated-cell-13-23"><a href="#annotated-cell-13-23" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="3" data-code-annotation="1">Base image from the Rocker Project — a battle-tested R 4.4 environment with the tidyverse and system libraries pre-installed.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="5" data-code-annotation="2">Add Quarto CLI as a devcontainer feature — installs on top of the base image without modifying the Dockerfile.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="7" data-code-annotation="3">Add Python 3.11 as a feature — layered cleanly alongside R in the same container.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="22" data-code-annotation="4">Run after the container is created: restore the Python virtual environment and the R package library from their respective lockfiles.</span>
</dd>
</dl>
</section>
<section id="when-to-use-devcontainers" class="level3">
<h3 class="anchored" data-anchor-id="when-to-use-devcontainers">When to Use DevContainers</h3>
<p>DevContainers are <strong>L4 reproducibility</strong> — use them when:</p>
<ul>
<li>System dependencies are complex (geospatial, databases, specific compilers)</li>
<li>Team onboarding needs to be instant</li>
<li>You need CI/CD parity with development</li>
<li>Long-term archival is required</li>
</ul>
<p>Skip them when:</p>
<ul>
<li>Pure R/Python with no system dependencies</li>
<li>Quick personal projects</li>
<li>Environments where Docker isn’t available</li>
</ul>
</section>
<section id="r-specific-devcontainers-with-rocker" class="level3">
<h3 class="anchored" data-anchor-id="r-specific-devcontainers-with-rocker">R-Specific DevContainers with Rocker</h3>
<p>The <a href="https://rocker-project.org/">Rocker Project</a> provides excellent base images:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"R Development"</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"image"</span><span class="fu">:</span> <span class="st">"ghcr.io/rocker-org/devcontainer/tidyverse:4.4"</span><span class="fu">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"features"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"ghcr.io/rocker-org/devcontainer-features/quarto-cli:1"</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"ghcr.io/rocker-org/devcontainer-features/rig:1"</span><span class="fu">:</span> <span class="fu">{}</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Available images:</p>
<ul>
<li><code>rocker/r-ver</code> — Base R</li>
<li><code>rocker/tidyverse</code> — R + tidyverse packages</li>
<li><code>rocker/verse</code> — tidyverse + LaTeX</li>
<li><code>rocker/geospatial</code> — Includes GDAL (Geospatial Data Abstraction Library), GEOS (Geometry Engine — Open Source), PROJ (cartographic projections library)</li>
</ul>
</section>
<section id="multi-language-devcontainer" class="level3">
<h3 class="anchored" data-anchor-id="multi-language-devcontainer">Multi-Language DevContainer</h3>
<p>For projects using both R and Python:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"R + Python Data Science"</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"build"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"dockerfile"</span><span class="fu">:</span> <span class="st">"Dockerfile"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"features"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"ghcr.io/rocker-org/devcontainer-features/quarto-cli:1"</span><span class="fu">:</span> <span class="fu">{}</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"postCreateCommand"</span><span class="fu">:</span> <span class="st">"rv sync &amp;&amp; uv sync"</span><span class="fu">,</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"customizations"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"vscode"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">"extensions"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                <span class="st">"REditorSupport.r"</span><span class="ot">,</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ms-python.python"</span><span class="ot">,</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">"quarto.quarto"</span><span class="ot">,</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">"posit.publisher"</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>With a custom Dockerfile:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ghcr.io/rocker-org/devcontainer/tidyverse:4.4</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install uv for Python</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">curl</span> <span class="at">-LsSf</span> https://astral.sh/uv/install.sh <span class="kw">|</span> <span class="fu">sh</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Install rv for R</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">curl</span> <span class="at">-sSL</span> https://raw.githubusercontent.com/A2-ai/rv/refs/heads/main/scripts/install.sh <span class="kw">|</span> <span class="fu">bash</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># System dependencies</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    libpq-dev <span class="dt">\</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    libgdal-dev <span class="dt">\</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> <span class="at">-rf</span> /var/lib/apt/lists/<span class="pp">*</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="workflow-orchestration" class="level2">
<h2 class="anchored" data-anchor-id="workflow-orchestration">Workflow Orchestration</h2>
<p>Beyond package management, you need tools to manage the execution flow of your analysis. <a href="https://snakemake.github.io/">Snakemake</a> is the most widely adopted cross-language option.</p>
<section id="snakemake" class="level3">
<h3 class="anchored" data-anchor-id="snakemake">Snakemake</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Snakefile</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>rule <span class="bu">all</span>:</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">input</span>: <span class="st">"results/final_report.html"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>rule clean_data:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">input</span>: <span class="st">"data/raw.csv"</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    output: <span class="st">"data/clean.csv"</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    script: <span class="st">"scripts/clean.py"</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>rule train_model:</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">input</span>: <span class="st">"data/clean.csv"</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    output: <span class="st">"models/model.pkl"</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    script: <span class="st">"scripts/train.py"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="documentation-quarto" class="level2">
<h2 class="anchored" data-anchor-id="documentation-quarto">Documentation: Quarto</h2>
<p><a href="https://quarto.org/">Quarto</a> unifies documentation across R, Python, and Julia. A typical Quarto document combines markdown narrative with code chunks in either language.</p>
<p>Key reproducibility feature: With <code>freeze: auto</code> in your YAML header, Quarto caches computational outputs, so documents can be re-rendered without re-executing all code — improving both reproducibility and build times.</p>
<p>Quarto documents use fenced code blocks with language specifiers like <code>{python}</code> or <code>{r}</code> to indicate executable code, and can output to HTML, PDF, Word, and many other formats.</p>
<hr>
</section>
<section id="organizational-considerations" class="level2">
<h2 class="anchored" data-anchor-id="organizational-considerations">Organizational Considerations</h2>
<section id="team-standards" class="level3">
<h3 class="anchored" data-anchor-id="team-standards">Team Standards</h3>
<p>Different teams within an organization may need different reproducibility levels:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Team</th>
<th>Typical Level</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data Science R&amp;D</td>
<td>L2-L3</td>
<td>Fast iteration, exploration</td>
</tr>
<tr class="even">
<td>Production Analytics</td>
<td>L3-L4</td>
<td>Reliability, handoffs</td>
</tr>
<tr class="odd">
<td>Regulatory/Compliance</td>
<td>L4-L5</td>
<td>Audit requirements</td>
</tr>
<tr class="even">
<td>External Publications</td>
<td>L4-L5</td>
<td>Peer review, credibility</td>
</tr>
</tbody>
</table>
</section>
<section id="building-a-reproducibility-culture" class="level3">
<h3 class="anchored" data-anchor-id="building-a-reproducibility-culture">Building a Reproducibility Culture</h3>
<ol type="1">
<li><strong>Start with templates</strong> — Provide project templates at appropriate levels</li>
<li><strong>Automate checks</strong> — CI/CD that validates reproducibility</li>
<li><strong>Document decisions</strong> — Record <em>why</em> a certain level was chosen</li>
<li><strong>Review periodically</strong> — Projects may need to level up over time</li>
</ol>
</section>
<section id="the-cost-benefit-reality" class="level3">
<h3 class="anchored" data-anchor-id="the-cost-benefit-reality">The Cost-Benefit Reality</h3>
<p>The key insight: <span class="highlight" data-bg-colour="navy-mid" data-colour="snow">match your investment to your actual needs</span>. Over-engineering reproducibility for a throwaway analysis wastes time. Under-engineering for a regulatory submission creates risk.</p>
<p>As project risk and longevity increase, so should your reproducibility investment — from L1 (personal exploration) through L5 (regulatory/clinical).</p>
<hr>
</section>
</section>
<section id="regulated-environments-reproducibility-in-pharma-and-good-practices-gxp" class="level2">
<h2 class="anchored" data-anchor-id="regulated-environments-reproducibility-in-pharma-and-good-practices-gxp">Regulated Environments: Reproducibility in Pharma and Good Practices (GxP)</h2>
<p>Everything above applies to all data science work. But if you operate in a regulated environment — pharma, medical devices, clinical research — there are additional requirements that change the calculus significantly.</p>
<section id="what-fda-and-ema-actually-expect" class="level3">
<h3 class="anchored" data-anchor-id="what-fda-and-ema-actually-expect">What FDA and EMA actually expect</h3>
<p>The FDA’s 21 CFR Part 11 and the European Medicines Agency (EMA)’s comparable guidance don’t prescribe specific tools. What they require is an audit trail: given a result in a regulatory submission, you must be able to demonstrate exactly which code, which data, and which environment produced it — and reproduce it on demand.</p>
<p>In practice, this means:</p>
<ul>
<li><strong>Every analysis is traceable to a specific software version.</strong> Not “R 4.x”, but “R 4.4.2 with renv lockfile pinned to commit <code>abc123</code>”.</li>
<li><strong>Changes are documented.</strong> A git history is not optional; it’s part of the validation evidence.</li>
<li><strong>The environment is validated.</strong> IQ (Installation Qualification), OQ (Operational Qualification), PQ (Performance Qualification) aren’t bureaucratic theatre — they’re the documented proof that your platform behaves as expected.</li>
</ul>
</section>
<section id="sessioninfo-is-necessary-but-not-sufficient" class="level3">
<h3 class="anchored" data-anchor-id="sessioninfo-is-necessary-but-not-sufficient">sessionInfo() is necessary but not sufficient</h3>
<p><code>sessionInfo()</code> is the minimum. It tells you what packages were loaded in the R session at the time of analysis. Include it at the end of every regulatory-grade report:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>But <code>sessionInfo()</code> alone doesn’t let you reproduce the environment. It describes it. To actually restore it, you need a lockfile.</p>
</section>
<section id="renv-docker-as-a-practical-iqoqpq-story" class="level3">
<h3 class="anchored" data-anchor-id="renv-docker-as-a-practical-iqoqpq-story">renv + Docker as a practical IQ/OQ/PQ story</h3>
<p>The validation stack for a Shiny platform running on Posit Connect looks like this when done right:</p>
<ol type="1">
<li><strong>renv</strong> — lockfile in the repository, pinned to an exact snapshot date. <code>renv::restore()</code> gives any auditor the exact library used in production.</li>
<li><strong>Docker</strong> — the base image is pinned (<code>rocker/r-ver:4.4.2</code>, not <code>rocker/r-ver:latest</code>). This ensures system libraries are frozen, not just R packages.</li>
<li><strong>GitHub Actions</strong> — CI runs the test suite and renders key reports on every push. The green CI badge is part of the OQ evidence.</li>
<li><strong>Posit Connect</strong> — deployment is version-controlled. Each deployed bundle has a manifest and can be rolled back.</li>
</ol>
<p>The IQ document answers: <em>“Is the software correctly installed?”</em> — covered by the Docker image build log and the <code>renv::restore()</code> log.</p>
<p>The OQ document answers: <em>“Does it perform as specified?”</em> — covered by the automated test suite.</p>
<p>The PQ document answers: <em>“Does it perform as required in production?”</em> — covered by UAT sign-off and monitoring dashboards.</p>
<p>This isn’t a heavy process once it’s set up. The overhead is in the documentation, not the tooling. The tooling is Git, renv, Docker, and a CI runner — none of which require purchasing a validated platform.</p>
</section>
<section id="the-practical-minimum-for-regulatory-r-work" class="level3">
<h3 class="anchored" data-anchor-id="the-practical-minimum-for-regulatory-r-work">The practical minimum for regulatory R work</h3>
<p>If you’re not running a full validated platform but still need to produce defensible analyses (clinical biostatistics reports, ingredient safety dossiers, etc.):</p>
<ol type="1">
<li><strong>Git</strong> — every script in version control, analysis tied to a commit hash</li>
<li><strong>renv</strong> — lockfile committed alongside the code</li>
<li><strong><code>sessionInfo()</code> in every report</strong> — as a footer, not optional</li>
<li><strong>Quarto with <code>freeze: auto</code></strong> — computational outputs frozen and committed; the rendered report is reproducible without re-executing</li>
</ol>
<p>This gets you to L3/L4 on the reproducibility spectrum at low overhead. It won’t satisfy IQ/OQ/PQ for a validated system, but it satisfies the traceability requirement for analytical work and will hold up to a reasonably thorough audit.</p>
<hr>
</section>
</section>
<section id="the-complete-reproducibility-checklist" class="level2">
<h2 class="anchored" data-anchor-id="the-complete-reproducibility-checklist">The Complete Reproducibility Checklist</h2>
<section id="project-structure" class="level3">
<h3 class="anchored" data-anchor-id="project-structure">Project Structure</h3>
<pre><code>my-project/
├── .devcontainer/
│   └── devcontainer.json     # Container environment (L4+)
├── .github/
│   └── workflows/
│       └── ci.yml            # Automated testing
├── data/
│   ├── raw/                  # Immutable raw data
│   └── processed/            # Generated data (gitignored)
├── src/                      # Source code
├── notebooks/                # Exploratory work
├── reports/                  # Quarto documents
├── tests/                    # Unit tests
├── pyproject.toml            # Python dependencies
├── uv.lock                   # Python lockfile
├── rproject.toml             # R dependencies
├── rv.lock                   # R lockfile
├── .gitignore
└── README.md</code></pre>
</section>
<section id="by-level" class="level3">
<h3 class="anchored" data-anchor-id="by-level">By Level</h3>
<p><strong>L1 (Minimal):</strong></p>
<ul>
<li>Code in version control</li>
</ul>
<p><strong>L2 (Documented):</strong></p>
<ul>
<li>README with setup instructions</li>
<li>List of required packages</li>
</ul>
<p><strong>L3 (Lockfile):</strong></p>
<ul>
<li><code>uv.lock</code> / <code>rv.lock</code> / <code>renv.lock</code></li>
<li>Language version specified</li>
<li>CI that runs tests</li>
</ul>
<p><strong>L4 (Containerized):</strong></p>
<ul>
<li>DevContainer configuration</li>
<li>System dependencies documented</li>
<li>CI uses same container</li>
</ul>
<p><strong>L5 (Fully Isolated):</strong></p>
<ul>
<li>Workflow management (Snakemake)</li>
<li>Complete audit trail</li>
<li>Archived container images</li>
</ul>
<hr>
</section>
</section>
<section id="summary-the-modern-reproducibility-toolkit" class="level2">
<h2 class="anchored" data-anchor-id="summary-the-modern-reproducibility-toolkit">Summary: The Modern Reproducibility Toolkit</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Need</th>
<th>Python</th>
<th>R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Package management</td>
<td>uv</td>
<td>rv, renv</td>
</tr>
<tr class="even">
<td>Version management</td>
<td>uv, pyenv</td>
<td>rig</td>
</tr>
<tr class="odd">
<td>Containerization</td>
<td>devcontainers</td>
<td>devcontainers + Rocker</td>
</tr>
<tr class="even">
<td>Workflow</td>
<td>Snakemake</td>
<td>Snakemake</td>
</tr>
<tr class="odd">
<td>Documentation</td>
<td>Quarto, Jupyter</td>
<td>Quarto</td>
</tr>
<tr class="even">
<td>Formatting</td>
<td>ruff</td>
<td>air</td>
</tr>
<tr class="odd">
<td>Linting</td>
<td>ruff</td>
<td>lintr</td>
</tr>
</tbody>
</table>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Reproducibility is no longer optional — it’s table stakes for professional data science. The tooling has matured to the point where reproducible workflows are not just possible but practical.</p>
<p>But remember: <strong>reproducibility is a spectrum, not a binary</strong>. The right approach depends on your context — who needs to reproduce the work, for how long, and at what stakes.</p>
<p>Start with package management (<code>uv</code> for Python, <code>rv</code> or <code>renv</code> for R), add language version control (<code>rig</code>, <code>uv python</code>), and when system dependencies become complex, embrace devcontainers. Layer in Snakemake for complex multi-step pipelines, and document everything with Quarto.</p>
<p>The investment in reproducibility pays dividends: faster onboarding, fewer “works on my machine” incidents, easier debugging, and the confidence that your results can be verified and trusted. Just make sure you’re investing the right amount for your actual needs.</p>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><a href="https://docs.astral.sh/uv/">uv Documentation</a></li>
<li><a href="https://a2-ai.github.io/rv-docs/">rv Documentation</a></li>
<li><a href="https://rstudio.github.io/renv/">renv Documentation</a></li>
<li><a href="https://github.com/r-lib/rig">rig - R Installation Manager</a></li>
<li><a href="https://containers.dev/">DevContainers Specification</a></li>
<li><a href="https://rocker-project.org/">Rocker Project</a></li>
<li><a href="https://quarto.org/">Quarto</a></li>
<li><a href="https://snakemake.github.io/">Snakemake</a></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/antoinelucasfra\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Powered by <a href="https://quarto.org">Quarto</a>.</p>
</div>   
    <div class="nav-footer-center">
<p>© 2026 Antoine Lucas.</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/antoinelucasfra/antoinelucasfra.github.io/edit/main/posts/reproducibility-modern-tools/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/antoinelucasfra/antoinelucasfra.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>License: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY NC SA 4.0</a>.</p>
</div>
  </div>
</footer>




</body></html>